(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2512],{9661:function(e,t,r){"use strict";r.d(t,{Z:function(){return P}});var i=r(3366),n=r(7462),o=r(7294),a=r(6010),l=r(4780),c=r(948),s=r(1657),u=r(8169),d=r(5893),f=(0,u.Z)((0,d.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person"),p=r(1588),m=r(4867);function h(e){return(0,m.Z)("MuiAvatar",e)}(0,p.Z)("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);let g=["alt","children","className","component","imgProps","sizes","src","srcSet","variant"],v=e=>{let{classes:t,variant:r,colorDefault:i}=e;return(0,l.Z)({root:["root",r,i&&"colorDefault"],img:["img"],fallback:["fallback"]},h,t)},x=(0,c.ZP)("div",{name:"MuiAvatar",slot:"Root",overridesResolver(e,t){let{ownerState:r}=e;return[t.root,t[r.variant],r.colorDefault&&t.colorDefault]}})(({theme:e,ownerState:t})=>(0,n.Z)({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none"},"rounded"===t.variant&&{borderRadius:(e.vars||e).shape.borderRadius},"square"===t.variant&&{borderRadius:0},t.colorDefault&&(0,n.Z)({color:(e.vars||e).palette.background.default},e.vars?{backgroundColor:e.vars.palette.Avatar.defaultBg}:{backgroundColor:"light"===e.palette.mode?e.palette.grey[400]:e.palette.grey[600]}))),Z=(0,c.ZP)("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(e,t)=>t.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),b=(0,c.ZP)(f,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(e,t)=>t.fallback})({width:"75%",height:"75%"}),y=o.forwardRef(function(e,t){let r=(0,s.Z)({props:e,name:"MuiAvatar"}),{alt:l,children:c,className:u,component:f="div",imgProps:p,sizes:m,src:h,srcSet:y,variant:P="circular"}=r,w=(0,i.Z)(r,g),k=null,j=function({crossOrigin:e,referrerPolicy:t,src:r,srcSet:i}){let[n,a]=o.useState(!1);return o.useEffect(()=>{if(!r&&!i)return;a(!1);let n=!0,o=new Image;return o.onload=()=>{n&&a("loaded")},o.onerror=()=>{n&&a("error")},o.crossOrigin=e,o.referrerPolicy=t,o.src=r,i&&(o.srcset=i),()=>{n=!1}},[e,t,r,i]),n}((0,n.Z)({},p,{src:h,srcSet:y})),S=h||y,I=S&&"error"!==j,N=(0,n.Z)({},r,{colorDefault:!I,component:f,variant:P}),C=v(N);return k=I?(0,d.jsx)(Z,(0,n.Z)({alt:l,src:h,srcSet:y,sizes:m,ownerState:N,className:C.img},p)):null!=c?c:S&&l?l[0]:(0,d.jsx)(b,{ownerState:N,className:C.fallback}),(0,d.jsx)(x,(0,n.Z)({as:f,ownerState:N,className:(0,a.Z)(C.root,u),ref:t},w,{children:k}))});var P=y},9226:function(e,t,r){"use strict";var i=r(1354),n=r(7078),o=r(1265),a=r(606);let l=(0,o.Z)(),c=(0,i.Z)({themeId:a.Z,defaultTheme:l,defaultClassName:"MuiBox-root",generateClassName:n.Z.generate});t.Z=c},1233:function(e,t,r){"use strict";r.d(t,{Z:function(){return S}});var i=r(3366),n=r(7462),o=r(7294),a=r(6010),l=r(9766),c=r(4780),s=r(4867),u=r(3264),d=r(5149),f=r(9707),p=r(6500),m=r(5408),h=r(8700),g=r(5893);let v=["component","direction","spacing","divider","children","className","useFlexGap"],x=(0,p.Z)(),Z=(0,u.Z)("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function b(e){return(0,d.Z)({props:e,name:"MuiStack",defaultTheme:x})}let y=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],P=({ownerState:e,theme:t})=>{let r=(0,n.Z)({display:"flex",flexDirection:"column"},(0,m.k9)({theme:t},(0,m.P$)({values:e.direction,breakpoints:t.breakpoints.values}),e=>({flexDirection:e})));if(e.spacing){let i=(0,h.hB)(t),o=Object.keys(t.breakpoints.values).reduce((t,r)=>(("object"==typeof e.spacing&&null!=e.spacing[r]||"object"==typeof e.direction&&null!=e.direction[r])&&(t[r]=!0),t),{}),a=(0,m.P$)({values:e.direction,base:o}),c=(0,m.P$)({values:e.spacing,base:o});"object"==typeof a&&Object.keys(a).forEach((e,t,r)=>{let i=a[e];if(!i){let n=t>0?a[r[t-1]]:"column";a[e]=n}});let s=(t,r)=>e.useFlexGap?{gap:(0,h.NA)(i,t)}:{"& > :not(style) + :not(style)":{margin:0,[`margin${y(r?a[r]:e.direction)}`]:(0,h.NA)(i,t)}};r=(0,l.Z)(r,(0,m.k9)({theme:t},c,s))}return(0,m.dt)(t.breakpoints,r)};var w=r(948),k=r(1657);let j=function(e={}){let{createStyledComponent:t=Z,useThemeProps:r=b,componentName:l="MuiStack"}=e,u=()=>(0,c.Z)({root:["root"]},e=>(0,s.Z)(l,e),{}),d=t(P),p=o.forwardRef(function(e,t){let l=r(e),c=(0,f.Z)(l),{component:s="div",direction:p="column",spacing:m=0,divider:h,children:x,className:Z,useFlexGap:b=!1}=c,y=(0,i.Z)(c,v),P=u();return(0,g.jsx)(d,(0,n.Z)({as:s,ownerState:{direction:p,spacing:m,useFlexGap:b},ref:t,className:(0,a.Z)(P.root,Z)},y,{children:h?function(e,t){let r=o.Children.toArray(e).filter(Boolean);return r.reduce((e,i,n)=>(e.push(i),n<r.length-1&&e.push(o.cloneElement(t,{key:`separator-${n}`})),e),[])}(x,h):x}))});return p}({createStyledComponent:(0,w.ZP)("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root}),useThemeProps:e=>(0,k.Z)({props:e,name:"MuiStack"})});var S=j},1354:function(e,t,r){"use strict";r.d(t,{Z:function(){return p}});var i=r(7462),n=r(3366),o=r(7294),a=r(6010),l=r(9731),c=r(6523),s=r(9707),u=r(9718),d=r(5893);let f=["className","component"];function p(e={}){let{themeId:t,defaultTheme:r,defaultClassName:p="MuiBox-root",generateClassName:m}=e,h=(0,l.ZP)("div",{shouldForwardProp:e=>"theme"!==e&&"sx"!==e&&"as"!==e})(c.Z),g=o.forwardRef(function(e,o){let l=(0,u.Z)(r),c=(0,s.Z)(e),{className:g,component:v="div"}=c,x=(0,n.Z)(c,f);return(0,d.jsx)(h,(0,i.Z)({as:v,ref:o,className:(0,a.Z)(g,m?m(p):p),theme:t&&l[t]||l},x))});return g}},3264:function(e,t,r){"use strict";var i=r(182);let n=(0,i.ZP)();t.Z=n},1124:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/Student/updateProfile",function(){return r(7409)}])},6216:function(e,t,r){"use strict";r.d(t,{I8:function(){return s},Kg:function(){return d},db:function(){return c},hJ:function(){return n.hJ},l2:function(){return l},tO:function(){return u}});var i=r(3977),n=r(8918),o=r(1259),a=r(6650);let l=(0,i.ZF)({apiKey:"AIzaSyC-ZYyj3mpgKszGlMQmETjBuBCqzYGFDh4",authDomain:"edushare-e9242.firebaseapp.com",projectId:"edushare-e9242",storageBucket:"edushare-e9242.appspot.com",messagingSenderId:"826723606155",appId:"1:826723606155:web:4ef2868e093bc281523e8e",measurementId:"G-BGCNB10FJ0"}),c=(0,n.ad)(l),s=(0,o.v0)(l),u=(0,a.cF)(l),d=()=>(0,n.Bt)()},6716:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});var i=r(8918);async function n(e,t){let r;if(!e)throw Error("userId is null or undefined.");let n=(0,i.ad)(t),o=(0,i.JU)(n,"Student",e),a=await (0,i.QT)(o),l=(0,i.JU)(n,"Instructor",e),c=await (0,i.QT)(l),s=(0,i.JU)(n,"Admin",e),u=await (0,i.QT)(s);if(a.exists())r="Student";else if(c.exists())r="Instructor";else if(u.exists())r="Admin";else throw Error("User not found in any role collection.");return r}},7409:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return x}});var i=r(5893),n=r(7294),o=r(1163);r(5242);var a=r(6886),l=r(629),c=r(1233),s=r(5861),u=r(9226),d=r(9661),f=r(1903),p=r(3321),m=r(6216),h=r(6716),g=r(8918),v=r(6650);function x(){var e;let t=(0,o.useRouter)(),[r,x]=(0,n.useState)(!0),[Z,b]=(0,n.useState)({displayName:"",bio:"",title:"",profilePicture:null,coverPicture:null}),[y,P]=(0,n.useState)(null),[w,k]=(0,n.useState)(null),j=null===m.I8||void 0===m.I8?void 0:null===(e=m.I8.currentUser)||void 0===e?void 0:e.uid;(0,n.useEffect)(()=>{!async function(){let e=await (0,h.Z)(j,m.l2);if(!j||!e){t.push("/");return}let r=(0,g.ad)(m.l2),i=(0,g.JU)(r,e,j),n=await (0,g.QT)(i);if(n.exists()){let o=n.data();b({displayName:o.displayName,bio:o.bio,title:o.title,profilePicture:o.profilePicture,coverPicture:o.coverPicture}),P(o.profilePicture),k(o.coverPicture),x(!1)}}()},[j,t]);let S=e=>{let{name:t,value:r}=e.target;b(e=>({...e,[t]:r}))},I=e=>{let t=e.target.files[0];t&&(b(e=>({...e,profilePicture:t})),P(URL.createObjectURL(t)))},N=e=>{let t=e.target.files[0];t&&(b(e=>({...e,coverPicture:t})),k(URL.createObjectURL(t)))},C=async(e,t)=>{if(!(e instanceof File))return e;{let r=(0,v.cF)(m.l2),i=(0,v.iH)(r,t);return await (0,v.KV)(i,e),await (0,v.Jt)(i)}},R=async()=>{x(!0);let e=await (0,h.Z)(j,m.l2),r=await C(Z.profilePicture,"".concat(e,"/").concat(j,"/profilePicture")),i=await C(Z.coverPicture,"".concat(e,"/").concat(j,"/coverPicture")),n={...Z,profilePicture:r,coverPicture:i},o=(0,g.ad)(m.l2),a=(0,g.JU)(o,e,j);await (0,g.r7)(a,n),x(!1),t.push("/Student/Profile")};return(0,i.jsx)(a.ZP,{container:!0,justifyContent:"center",alignItems:"center",style:{backgroundImage:"url(https://i.ibb.co/6bJ0VFb/Background.jpg)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",height:"100%",width:"100%"},children:(0,i.jsx)(l.Z,{sx:{width:{xs:"90%",sm:500},minHeight:{xs:"80%",sm:650},backgroundColor:"white",padding:5,pb:10,boxShadow:{xs:"none",md:"0px 4px 5px -2px rgba(0,0,0,0.2),0px 7px 10px 1px rgba(0,0,0,0.14),0px 2px 16px 1px rgba(0,0,0,0.12)"}},children:(0,i.jsxs)(c.Z,{direction:"column",gap:2,children:[(0,i.jsx)(s.Z,{variant:"h4",sx:{color:"#454545",fontWeight:"800",textAlign:"center"},children:"Update Profile"}),(0,i.jsx)("form",{style:{display:"flex",flexDirection:"column",margin:"10px 10px 10px 10px"},children:(0,i.jsxs)(c.Z,{spacing:3,padding:3,children:[(0,i.jsxs)(u.Z,{sx:{textAlign:"center"},children:[(0,i.jsx)("img",{src:w,alt:"Cover Picture",style:{width:"100%",height:"auto",cursor:"pointer"},onClick:()=>document.getElementById("coverPictureInput").click()}),(0,i.jsx)("input",{type:"file",accept:"image/*",id:"coverPictureInput",hidden:!0,onChange:N})]}),(0,i.jsxs)(u.Z,{sx:{textAlign:"center"},children:[(0,i.jsx)(d.Z,{src:y,alt:"Profile Picture",sx:{width:140,height:140,marginBottom:2,boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)",border:"4px solid #ffffff",position:"relative",top:"-70px"},onClick:()=>document.getElementById("profilePictureInput").click()}),(0,i.jsx)("input",{type:"file",accept:"image/*",id:"profilePictureInput",hidden:!0,onChange:I})]}),(0,i.jsx)(f.Z,{fullWidth:!0,name:"displayName",label:"Display Name",value:Z.displayName,onChange:S}),(0,i.jsx)(f.Z,{fullWidth:!0,name:"title",label:"Title",value:Z.title,onChange:S}),(0,i.jsx)(f.Z,{fullWidth:!0,name:"bio",label:"Bio",multiline:!0,rows:4,value:Z.bio,onChange:S}),(0,i.jsx)(p.Z,{fullWidth:!0,variant:"contained",color:"primary",disabled:r,onClick:R,children:"Update Profile"})]})})]})})})}}},function(e){e.O(0,[2016,2018,6224,387,6886,4695,1903,9774,2888,179],function(){return e(e.s=1124)}),_N_E=e.O()}]);