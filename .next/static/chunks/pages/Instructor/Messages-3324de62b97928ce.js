(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3304],{5298:function(r,t,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/Instructor/Messages",function(){return e(8507)}])},6216:function(r,t,e){"use strict";e.d(t,{I8:function(){return c},Kg:function(){return u},db:function(){return l},hJ:function(){return s.hJ},l2:function(){return a},tO:function(){return d}});var o=e(3977),s=e(8918),n=e(1259),i=e(6650);let a=(0,o.ZF)({apiKey:"AIzaSyC-ZYyj3mpgKszGlMQmETjBuBCqzYGFDh4",authDomain:"edushare-e9242.firebaseapp.com",projectId:"edushare-e9242",storageBucket:"edushare-e9242.appspot.com",messagingSenderId:"826723606155",appId:"1:826723606155:web:4ef2868e093bc281523e8e",measurementId:"G-BGCNB10FJ0"}),l=(0,s.ad)(a),c=(0,n.v0)(a),d=(0,i.cF)(a),u=()=>(0,s.Bt)()},7628:function(r,t,e){"use strict";var o=e(5893),s=e(2293),n=e(155),i=e(5861),a=e(7850),l=e(8972),c=e(2831),d=e(4229),u=e(9793),x=e(7294),p=e(1163),h=e(3601),m=e(6216),g=e(8918);t.Z=function(r){var t,e;let{setCourseSearch:f}=r,{data:j,loading:Z,error:b}=(0,h.Z)("http://localhost:1337/api/logins"),y=(0,p.useRouter)(),[C,v]=(0,x.useState)(!1),[I,k]=(0,x.useState)([]);(0,x.useEffect)(()=>{let r=async()=>{let r=(0,m.hJ)(m.db,"Instructor"),t=await (0,g.PL)(r),e=t.docs.map(r=>({id:r.id,attributes:r.data()}));k(e)};r()},[]);let B=null===m.I8||void 0===m.I8?void 0:null===(t=m.I8.currentUser)||void 0===t?void 0:t.uid,w=null===(e=I.find(r=>r.id===B))||void 0===e?void 0:e.attributes.displayName;return console.log(w),(0,o.jsxs)(s.Z,{position:"sticky",sx:{backgroundColor:"#FDFEFE"},children:[(0,o.jsxs)(n.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,o.jsxs)(n.Z,{children:[(0,o.jsxs)(i.Z,{variant:"h6",sx:{color:"#454545",fontWeight:"800",margin:"0 0 0 -23px",cursor:"pointer"},children:["Edu",(0,o.jsx)("span",{style:{color:"#1ABC9C"},onClick:()=>y.push("/Instructor"),children:"Share"})]}),(0,o.jsxs)(i.Z,{variant:"h6",sx:{padding:"6px",margin:"0 0 0 66px",color:"#454545",fontWeight:"800",cursor:"pointer"},children:["Wellcome ",w," ! "]})]}),(0,o.jsxs)(n.Z,{children:[(0,o.jsx)(c.Z,{sx:{margin:"0 10px 0 10px",color:"#B2BABB",cursor:"pointer"}}),(0,o.jsx)(u.Z,{sx:{margin:"0 10px 0 10px",color:"#B2BABB",cursor:"pointer"}}),(0,o.jsx)(d.Z,{onClick:r=>v(!0),sx:{margin:"0 10px 0 10px",color:"#B2BABB",cursor:"pointer"}})]})]}),(0,o.jsx)(a.Z,{id:"demo-positioned-menu","aria-labelledby":"demo-positioned-button",open:C,onClose:r=>v(!1),anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},sx:{margin:"30px 0 0 0",cursor:"pointer"},children:(0,o.jsx)(l.Z,{onClick:()=>y.push("/"),sx:{cursor:"pointer"},children:"Logout"})})]})}},780:function(r,t,e){"use strict";var o=e(5893),s=e(9226),n=e(8462),i=e(7212),a=e(8619),l=e(8885),c=e(9334),d=e(8681),u=e(9512),x=e(8201),p=e(6638),h=e(1718),m=e(3147),g=e(1163),f=e(7294),j=e(5675),Z=e(5682),b=e(6824);t.Z=function(){let r=(0,g.useRouter)(),t=(0,j._)();return(0,f.useEffect)(()=>{}),(0,f.useEffect)(()=>{t.start({opacity:1,x:0,transition:{duration:1}})},[]),(0,o.jsx)(s.Z,{component:Z.E.div,animate:t,initial:{opacity:0,x:-100},bgcolor:"#FDFEFE",flex:1,p:1,position:"sticky",sx:{maxWidth:"250px"},children:(0,o.jsxs)(n.Z,{children:[(0,o.jsx)(i.ZP,{disablePadding:!0,children:(0,o.jsxs)(a.Z,{onClick:()=>r.push("/Instructor"),sx:{"&:hover":{backgroundColor:"#1ABC9C",color:"primary.contrastText"},transition:"background-color 0.3s ease-in-out"},children:[(0,o.jsx)(l.Z,{children:(0,o.jsx)(p.Z,{})}),(0,o.jsx)(c.Z,{sx:{color:"#909497"},primary:"Home"})]})}),(0,o.jsx)(i.ZP,{disablePadding:!0,children:(0,o.jsxs)(a.Z,{onClick:function(){r.push("/Instructor/uploadcontanet")},sx:{"&:hover":{backgroundColor:"#1ABC9C",color:"primary.contrastText"},transition:"background-color 0.3s ease-in-out"},children:[(0,o.jsx)(l.Z,{children:(0,o.jsx)(d.Z,{})}),(0,o.jsx)(c.Z,{sx:{color:"#909497"},primary:"Upload Content"})]})}),(0,o.jsx)(i.ZP,{disablePadding:!0,children:(0,o.jsxs)(a.Z,{onClick:()=>r.push("/Instructor/mystudents"),sx:{"&:hover":{backgroundColor:"#1ABC9C",color:"primary.contrastText"},transition:"background-color 0.3s ease-in-out"},children:[(0,o.jsx)(l.Z,{children:(0,o.jsx)(u.Z,{})}),(0,o.jsx)(c.Z,{sx:{color:"#909497"},primary:"My Students"})]})}),(0,o.jsx)(i.ZP,{disablePadding:!0,children:(0,o.jsxs)(a.Z,{onClick:()=>r.push("/Instructor/myBlogs"),sx:{"&:hover":{backgroundColor:"#1ABC9C",color:"primary.contrastText"},transition:"background-color 0.3s ease-in-out"},children:[(0,o.jsx)(l.Z,{children:(0,o.jsx)(h.Z,{})}),(0,o.jsx)(c.Z,{sx:{color:"#909497"},primary:"My Blogs"})]})}),(0,o.jsx)(i.ZP,{disablePadding:!0,children:(0,o.jsxs)(a.Z,{onClick:()=>r.push("/Instructor/myCalendar"),sx:{"&:hover":{backgroundColor:"#1ABC9C",color:"primary.contrastText"},transition:"background-color 0.3s ease-in-out"},children:[(0,o.jsx)(l.Z,{children:(0,o.jsx)(m.Z,{})}),(0,o.jsx)(c.Z,{sx:{color:"#909497"},primary:"My Calendar"})]})}),(0,o.jsx)(i.ZP,{disablePadding:!0,children:(0,o.jsxs)(a.Z,{onClick:()=>r.push("/Instructor/Messages"),sx:{"&:hover":{backgroundColor:"#1ABC9C",color:"primary.contrastText"},transition:"background-color 0.3s ease-in-out"},children:[(0,o.jsx)(l.Z,{children:(0,o.jsx)(b.Z,{})}),(0,o.jsx)(c.Z,{sx:{color:"#909497"},primary:"Inbox"})]})}),(0,o.jsx)(i.ZP,{disablePadding:!0,children:(0,o.jsxs)(a.Z,{onClick:()=>r.push("/Instructor/profile"),sx:{"&:hover":{backgroundColor:"#1ABC9C",color:"primary.contrastText"},transition:"background-color 0.3s ease-in-out"},children:[(0,o.jsx)(l.Z,{children:(0,o.jsx)(x.Z,{})}),(0,o.jsx)(c.Z,{sx:{color:"#909497"},primary:"Profile"})]})})]})})}},3601:function(r,t,e){"use strict";var o=e(7294),s=e(8918),n=e(6216);let i=r=>{let[t,e]=(0,o.useState)([]),[i,a]=(0,o.useState)(null),[l,c]=(0,o.useState)(!0);return(0,o.useEffect)(()=>{let t=async()=>{c(!0);try{let t=await (0,s.PL)((0,s.hJ)(n.db,r)),o=t.docs.map(r=>({...r.data(),id:r.id}));e(o),c(!1)}catch(i){a(i),c(!1)}};t()},[r]),{data:t,error:i,loading:l}};t.Z=i},8507:function(r,t,e){"use strict";e.r(t);var o=e(5893),s=e(7294),n=e(8918),i=e(6216),a=e(4776),l=e(6886),c=e(5861),d=e(9226),u=e(3321),x=e(7720),p=e(657),h=e(7645),m=e(6514),g=e(1903),f=e(1425),j=e(780),Z=e(7628),b=e(1163);e(720),e(6129);let y=s.forwardRef(function(r,t){return(0,o.jsx)(a.Z,{direction:"up",ref:t,...r})});t.default=function(r){var t;let{userId:e}=r,[a,C]=(0,s.useState)([]),[v,I]=(0,s.useState)([]),[k,B]=(0,s.useState)([]),[w,P]=s.useState(!1),S=r=>r===e,[R,E]=s.useState({rs:""}),[N,A]=s.useState(!1),F=(0,b.useRouter)();e=null===i.I8||void 0===i.I8?void 0:null===(t=i.I8.currentUser)||void 0===t?void 0:t.uid,(0,s.useEffect)(()=>{let r=async(r,t)=>{if(!r||!t)return console.error("Invalid user ID or role"),{};let e=(0,n.ad)(i.l2),o=(0,n.JU)(e,t,r),s=await (0,n.QT)(o);return s.exists()?{name:s.data().displayName,role:t}:{}},t=async()=>{if(e){let t=(0,n.hJ)(i.db,"Message"),o=(0,n.IO)(t,(0,n.ar)("toId","==",e)),s=await (0,n.PL)(o),a=[];for(let l of s.docs){let c=l.data(),d=await r(c.fromId,c.fromRole);console.log(c),a.push({id:l.id,data:{...c,fromName:d.name,fromRole:d.role,InstructorReplays:c.InstructorReplays||[]}})}C(a)}},o=async()=>{let r=(0,n.hJ)(i.db,"Instructor"),t=await (0,n.PL)(r),e=t.docs.map(r=>({id:r.id,attributes:r.data()}));I(e)},s=async()=>{let r=(0,n.hJ)(i.db,"Message"),t=await (0,n.PL)(r),e=t.docs.map(r=>({id:r.id,attributes:r.data()}));B(e)};o(),s(),t()},[e]);let T=k.filter(r=>r.attributes.fromId===e);console.log(k),console.log(v),console.log(T),console.log(e);let _=r=>{console.log(r),A(r),P(!0),console.log(N)},M=()=>{P(!1)},J=r=>{E({rs:r.target.value})};async function D(){try{let r=(0,n.JU)(i.db,"Message",N),t=await (0,n.QT)(r),e=t.data().InstructorReplays||[];console.log(e);let o=[...e,R.rs];console.log(o),await (0,n.r7)(r,{InstructorReplays:o}),P(!1),F.reload()}catch(s){console.log(s)}}return(0,o.jsxs)("div",{children:[(0,o.jsx)(Z.Z,{}),(0,o.jsxs)(l.ZP,{container:!0,children:[(0,o.jsx)(l.ZP,{item:!0,xs:2,children:(0,o.jsx)(j.Z,{})}),(0,o.jsxs)(l.ZP,{item:!0,xs:10,children:[(0,o.jsx)(c.Z,{variant:"h5",gutterBottom:!0,sx:{fontSize:"30px",fontWeight:"1000",margin:"30px 0",color:"#454545"},children:"Messages"}),(0,o.jsx)(d.Z,{sx:{display:"flex",flexDirection:"column",overflowY:"scroll",padding:2,height:"70vh"},children:T.length>0?T.map(r=>{var t,s;return(0,o.jsxs)(d.Z,{sx:{marginBottom:2},children:[(0,o.jsxs)(c.Z,{variant:"body2",sx:{display:"flex",justifyContent:"center",margin:"0 auto 10px auto",fontFamily:"Arial, sans-serif",color:"white",backgroundColor:"#5D6D7E",padding:"10px",borderRadius:"0.5rem",width:"30%",fontWeight:"700"},children:["Chat with Student: ","".concat(r.attributes.toFirstName," ").concat(r.attributes.toLastName)]}),(0,o.jsx)(d.Z,{sx:{display:"flex",justifyContent:r.attributes.fromId===e?"flex-end":"flex-start",marginBottom:1},children:(0,o.jsxs)(c.Z,{variant:"body1",sx:{backgroundColor:r.attributes.fromId===e?"primary.light":"grey.500",color:"white",borderRadius:"18px",padding:"10px"},children:[S(r.attributes.fromId)?r.attributes.fromName:r.attributes.toFirstName,": ",r.attributes.message]})}),r.attributes.InstructorReplays&&Array.isArray(r.attributes.InstructorReplays)?r.attributes.InstructorReplays.map((t,s)=>(0,o.jsx)(d.Z,{sx:{display:"flex",justifyContent:r.attributes.fromId===e?"flex-end":"flex-start",marginBottom:1},children:(0,o.jsxs)(c.Z,{variant:"body2",sx:{backgroundColor:r.attributes.fromId===e?"primary.light":"grey.500",color:"white",borderRadius:"18px",padding:"10px"},children:[r.attributes.fromName,": ",t]})},s)):null,null===(t=r.attributes)||void 0===t?void 0:null===(s=t.replays)||void 0===s?void 0:s.map((t,e)=>(0,o.jsx)(d.Z,{sx:{display:"flex",justifyContent:"flex-start",marginBottom:1},children:(0,o.jsxs)(c.Z,{variant:"body2",sx:{backgroundColor:"grey.500",color:"white",borderRadius:"18px",padding:"10px"},children:[r.attributes.toFirstName+""+r.attributes.toLastName,": ",t]})},e)),(0,o.jsx)(u.Z,{variant:"outlined",color:"primary",onClick:()=>_(r.id),sx:{alignSelf:"flex-end",marginBottom:2},children:"Reply"}),(0,o.jsx)(x.Z,{sx:{marginBottom:2}})]},r.id)}):(0,o.jsx)(c.Z,{variant:"body1",children:"No messages found."})}),(0,o.jsxs)(p.Z,{open:w,TransitionComponent:y,keepMounted:!0,onClose:M,"aria-describedby":"alert-dialog-slide-description",children:[(0,o.jsx)(h.Z,{sx:{fontSize:"30px",textAlign:"center",fontWeight:"750"},children:"Your Message"}),(0,o.jsx)(m.Z,{children:(0,o.jsx)(g.Z,{id:"outlined-multiline-static",label:"Reply Here ...",multiline:!0,rows:4,sx:{margin:"10px 10px 10px 10px",width:"100%"},name:"rs",onChange:J})}),(0,o.jsxs)(f.Z,{children:[(0,o.jsx)(u.Z,{onClick:M,color:"primary",children:"Cancel"}),(0,o.jsx)(u.Z,{color:"primary",onClick:D,children:"Send"})]})]})]})]})]})}}},function(r){r.O(0,[2016,2018,6224,387,9060,6886,4695,1903,4163,3640,9774,2888,179],function(){return r(r.s=5298)}),_N_E=r.O()}]);